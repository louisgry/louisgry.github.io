---
title: "《剑指Java》Ch2-计算机网络"
date: 2019-10-13 15:44:45
tags: 计算机网络
---
- 2-1：网络基础知识讲解
<!-- more -->
    - OSI开放式互联参考模型
        - 应用层：规定收发方必须使用固定长度的消息头 HTTP
        - 表示层：解决不同系统之间的通信语法问题
        - 会话层：自动收发包，自动寻址，不同机器上的用户之间建立和管理会话
        - 传输层：接受上一层的数据，必要时进行分割，并将这些数据交给网络层，保证这些数据段有效到达 TCP、UDP
        - 网络层：将网络地址翻译成对应的物理地址，如何将数据从发送方路由到接收方，路由器在这一层（数据报）IP
        - 数据链路层：物理寻址，同时将原始比特流转变为逻辑传输线路，交换机在这一层
        - 物理层：解决两台物理机之间的通信需求，传输比特流，定义了设备的物理标准，网卡在这一层
    - TCP/IP：OSI七层模型概念的实现
        - 先自上而下，后自下而上处理数据头部
        - 五层模型：物理层、数据链路层、网络层、传输层、应用层
- 2-2~3：TCP的三次握手
    - 传输控制协议TCP简介
    - TCP报文头
        - 端口（协议端口）：进程通信标识
        - TCP Flags：URG、ACK、PSH、RST、SYN、FIN
    - [TCP的三次握手](#TCP的三次握手)
    - 关于三次握手的问题
        - 为什么要进行三次握手才能建立起连接？
            - 为了初始化Sequence Number的初始值
        - 首次握手的隐患：SYN超时问题
            - 针对SYN Flood的防护措施
        - 建立连接后，Client出现故障怎么办？
            - 保活机制
- 2-4：TCP的四次挥手
    - [TCP的四次挥手](#TCP的四次挥手)
    - 关于四次挥手的问题
        - 为什么需要四次握手才能断开连接？
            - 因为全双工，收发方手续要FIN报文和ACK报文
        - 为什么会有TIME_WAIT状态？（等待2MSL）
            - 确保有足够的时间让对方收到ACK包
            - 避免新旧连接混淆
        - 服务端出现大量CLOSE_WAIT状态的原因？
- 2-5：TCP和UDP的区别
    - UDP报文结构
        - Source Port、Destination Port、Length、Checksum、data octets
    - UDP的特点
        - 面向非连接
        - 不维护连接状态，支持同时向多个客户端传输相同的消息
        - 数据包报头只有8个字节，额外开销较小
        - 吞吐量只受限于数据生成速率、传输速率以及机器性能
        - 尽最大努力交付，不保证可靠交付，不需要维持复杂的链接状态表
        - 面向报文，不对应用程序提交的报文信息进行拆分或者合并
    - TCP和UDP的区别
        - 面向连接 vs 无连接
        - 可靠性
        - 有序性
        - 速度
        - 量级
- 2-6：TCP的滑窗
    - TCP的两个概念：RTT和RTO
        - RTT：发送一个数据包到收到对应的ACK，所花费的时间
        - RTO：重传时间间隔
    - TCP使用滑动窗口做流量控制和乱序重排
        - 两个作用：保证TCP的可靠性和流控特性
- 2-7~8：HTTP相关
    - 超文本传输协议HTTP特点
        - 支持客户/服务器模式
        - 简单快速
        - 灵活
        - 无连接
        - 无状态
    - HTTP请求结构
        - HTTP请求报文
    - HTTP响应结构
        - 协议版本、状态码、状态码描述（200：OK）
    - 请求/响应步骤
        - 客户端连接到Web服务器
        - 发送HTTP请求
        - 服务器接收请求并返回HTTP响应
        - 释放TCP连接
        - 客户端浏览器解析HTML内容
    - 状态码
        - 五种可能的取值
        - 1xx：指示信息—表示请求已接收，继续处理
        - 2xx：成功—表示请求已被成功接收、理解、接受（200 OK）
        - 3xx：重定向—要完成请求必须进行更进一步的操作
        - 4xx：客户端错误—请求有语法错误或请求无法实现
            - （400 Bad Request、 401 Unauthorized、403 Forbidden、404 Not Found）
        - 5xx：服务器错误—服务器未能实现合法的请求（500 Internal Server Error、503 Server Unavaliable）
    - 浏览器键入URL按下回车后经历的流程
        - 浏览器根据URL进行DNS解析
        - 找到IP地址后，进行TCP连接（三次握手）
        - 发送HTTP请求
        - 服务器处理请求并返回HTTP报文
        - 浏览器解析渲染页面
        - 连接结束
    - GET和POST的区别
        - Http报文层面：GET将请求信息放在URL，POST放在报文体中
        - 数据库层面：GET符合幂等性和安全性，POST不符合
        - 其他层面：GET可以被缓存、被存储，而POST不行
    - Cookie和Session的区别
        - Cookie：是由服务器发给客户端的特殊信息，以文本形式存放在客户端，在HTTP响应头中
        - Session：服务器端的机制，在服务器上保存的信息
        - Cookie数据存放在客户的浏览器上，Session数据在服务器上
        - Session相对于Cookie更安全
        - 若考虑减轻服务器负担，应当使用Cookie
- 2-9：HTTP和HTTPS的区别
    - HTTPS（HyperText Transfer Protocol Secure，超文本传输安全协议）
        - SSL（Security Sockets Layer，安全套接层），HTTP明文传输
        - 加密方式：对称加密、非对称加密、哈希算法（MD5）、数字签名
        - 数据传输流程
    - HTTP和HTTPS 的区别
        - HTTPS需要到CA申请证书，HTTP不需要
        - HTTPS密文传输，HTTP明文传输
        - 连接方式不同，HTTPS默认使用443端口，HTTP使用80端口
           - HTTPS=HTTP+加密+认证+完整性保护，较HTTP安全
    - HTTPS真的安全吗？
        - 浏览器默认填充http://，请求需要进行跳转，有被劫持的风险
        - 可以使用HSTS（HTTP Strict Transport Security）优化 
- 2-10：socket相关
    - [Socket&通信流程](#Socket)：是TCP/IP协议的抽象，是操作系统对外开放的接口
    - Socket相关面试题
        - TCP实现客户端和服务器的通信
        - UDP实现客户端和服务器的通信